<!doctype html>
<html>
<head>

    <!-- The '/homey.js' script must be included in your settings view to work -->
    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>

</head>
<body>

<h1 data-i18n="settings.title">
</h1>

<fieldset>
    <legend data-i18n="settings.login_title"></legend>

    <div class="row" data-i18n="settings.login_intro">

    </div>

    <div class="field row">
        <label for="username" data-i18n="settings.username"></label>
        <input id="username" type="text" value="" />
    </div>
    <div class="field row">
        <label for="password" data-i18n="settings.password"></label>
        <input id="password" type="password" value="" />
    </div>

</fieldset>

<button id="save" class="right" data-i18n="settings.save_changes"></button>

<script type="text/javascript">

    // a method named 'onHomeyReady' must be present in your code
    function onHomeyReady( Homey ){

        // Tell Homey we're ready to be displayed
        Homey.ready();

        var usernameElement = document.getElementById('username');
        var passwordElement = document.getElementById('password');
        var saveElement = document.getElementById('save');

        Homey.get('username', function(err, username) {
            if (err){
                return Homey.alert(err);
            }
            usernameElement.value = username;
        });

        Homey.get('password', function(err, password) {
            if (err){
                return Homey.alert(err);
            }
            passwordElement.value = password;
        });

        saveElement.addEventListener('click', function(e) {

            Homey.set('username', usernameElement.value, function(err){
                if (err){
                    return Homey.alert(err);
                }
            });
            Homey.set('password', passwordElement.value, function(err){
                if (err){
                    return Homey.alert(err);
                }
            });

        });
    }
</script>

</body>
</html>